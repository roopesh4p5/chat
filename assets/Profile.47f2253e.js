import{o as a,c as s,a as e,f as d,N as j,O as D,w as S,m as z,F as R,s as T,A as I,d as v,u,e as h,v as _,x as b,t as V,S as N,L,J as P,U as $,B as g,C as w,D as A,E,T as O}from"./index.90685792.js";import{P as F}from"./Placeholder.9175119a.js";function J(x,i){return a(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})])}function B(x,i){return a(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})])}const Y={class:"grid-center"},q={class:"max-w-sm w-72 mt-6 md:w-80 md:mt-10"},G=["onSubmit"],H=e("div",{class:"grid-center"},[e("h1",{class:"font-bold text-xl md:text-2xl"},"Set Up Your Profile")],-1),K={class:"grid-center relative group mt-2"},Q={for:"fileUpload",class:"opacity-0 group-hover:opacity-100 duration-300 absolute left-0 top-50 right-0 z-10 flex justify-center items-end text-xl text-black"},W=["src"],X=["src"],Z=["src"],ee={class:"pb-3 sm:pb-4"},te={class:"flex-between"},ae=e("label",{for:"username",class:"form-label text-black"},"Username",-1),se=["onUpdate:modelValue"],oe={class:"pb-3 sm:pb-2"},le={class:"flex-between"},ie=e("label",{for:"email",class:"form-label text-black"},"Bio",-1),ne={key:0},re={key:1},de=["onUpdate:modelValue"],ce={class:"my-2 grid-center"},ue={key:0,class:"error"},he={type:"submit",class:"form-btn"},fe={__name:"Profile",setup(x){var y;const i=d([]),r=d(""),c=d(""),m=d(""),C=j(),p=d(!1),k=(y=D)==null?void 0:y.currentUser.uid;S(()=>{N(L(P,"users",k)).then(o=>{o.exists()&&i.value.push(o.data())})});const M=()=>{const l=event.target.files[0];r.value=l,c.value=URL.createObjectURL(l)},f=z({bio:""}),U=async()=>{if(r.value)try{i.avatarPath&&await $(g(w,i.avatarPath)),p.value=!0;let o;const l=g(w,`images/${new Date().getTime()} - ${r.name}`),t=await A(l,r.value);o=await E(g(w,t.ref.fullPath)),await O(L(P,"users",k),{bio:f.bio,avatar:o,avatarPath:t.ref.fullPath}),p.value=!1,r.value=""}catch(o){console.log(o.message)}else m.value="Choose your profile image",setTimeout(()=>{m.value=""},2e3);C.push("/chat")};return(o,l)=>(a(),s("div",null,[e("div",Y,[(a(!0),s(R,null,T(i.value,t=>(a(),s("div",q,[e("form",{onSubmit:I(U,["prevent"]),class:"w-full shadow-md rounded-md py-4 px-6 k:border border-gray-900"},[H,e("div",K,[e("label",Q,[v(u(J),{class:"w-6 h-6"})]),c.value?(a(),s("img",{key:0,src:c.value,alt:"blob",class:"h-32 w-32 border-2 rounded-full"},null,8,W)):h("",!0),t.avatar?(a(),s("img",{key:1,src:t.avatar,alt:"avatar",class:"h-32 w-32 border-2 rounded-full"},null,8,X)):h("",!0),!t.avatar&&!c.value?(a(),s("img",{key:2,src:u(F),alt:"avatar",class:"h-32 w-32 border-2 rounded-full"},null,8,Z)):h("",!0),e("input",{type:"file",onChange:M,hidden:"",name:"fileUpload",id:"fileUpload",accept:"image/*"},null,32)]),e("div",ee,[e("div",te,[ae,v(u(B),{class:"w-4 h-4 text-black"})]),_(e("input",{type:"text",placeholder:"Username",class:"form-input text-black","onUpdate:modelValue":n=>t.username=n},null,8,se),[[b,t.username]])]),e("div",oe,[e("div",le,[ie,v(u(B),{class:"w-4 h-4 text-black"})]),t!=null&&t.bio?(a(),s("div",re,[_(e("input",{type:"bio",placeholder:"Make it interesting",class:"form-input","onUpdate:modelValue":n=>t.bio=n},null,8,de),[[b,t.bio]])])):(a(),s("div",ne,[_(e("input",{type:"bio",placeholder:"Make it interesting",class:"form-input text-black","onUpdate:modelValue":l[0]||(l[0]=n=>f.bio=n)},null,512),[[b,f.bio]])]))]),e("div",ce,[t.avatar?h("",!0):(a(),s("p",ue,V(m.value),1))]),e("div",null,[e("button",he,V(p.value?"Loading....":"Start Chat"),1)])],40,G)]))),256))])]))}};export{fe as default};
