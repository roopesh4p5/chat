import{o as a,c as s,a as e,f as d,N as z,O as D,w as S,m as T,z as R,e as c,F as V,v as $,A as I,d as _,u as m,x as v,y as b,t as B,S as N,L,J as P,U as A,V as E,B as g,C as w,D as O,E as F,T as J}from"./index.ed3bb095.js";import{P as Y}from"./Placeholder.9175119a.js";function q(k,n){return a(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})])}function C(k,n){return a(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})])}const G={class:"grid-center"},H={class:"max-w-sm w-72 mt-6 md:w-80 md:mt-10"},K=["onSubmit"],Q=e("div",{class:"grid-center"},[e("h1",{class:"font-bold text-xl md:text-2xl"},"Set Up Your Profile")],-1),W={class:"grid-center relative group mt-2"},X={for:"fileUpload",class:"opacity-0 group-hover:opacity-100 duration-300 absolute left-0 top-50 right-0 z-10 flex justify-center items-end text-xl text-black"},Z=["src"],ee=["src"],te=["src"],ae={class:"pb-3 sm:pb-4"},se={class:"flex-between"},oe=e("label",{for:"username",class:"form-label text-black"},"Username",-1),le=["onUpdate:modelValue"],ne={class:"pb-3 sm:pb-2"},ie={class:"flex-between"},re=e("label",{for:"email",class:"form-label text-black"},"Bio",-1),de={key:0},ce={key:1},ue=["onUpdate:modelValue"],me={class:"my-2 grid-center"},he={key:0,class:"error"},pe={type:"submit",class:"form-btn"},ve={__name:"Profile",setup(k){var y;const n=d([]),r=d(""),u=d(""),h=d(""),M=z(),p=d(!1),x=(y=D)==null?void 0:y.currentUser.uid;S(()=>{N(L(P,"users",x)).then(o=>{o.exists()&&n.value.push(o.data())})});const U=()=>{const l=event.target.files[0];r.value=l,u.value=URL.createObjectURL(l)},f=T({bio:""}),j=async()=>{if(r.value)try{n.avatarPath&&await E(g(w,n.avatarPath)),p.value=!0;let o;const l=g(w,`images/${new Date().getTime()} - ${r.name}`),t=await O(l,r.value);o=await F(g(w,t.ref.fullPath)),await J(L(P,"users",x),{bio:f.bio,avatar:o,avatarPath:t.ref.fullPath}),p.value=!1,r.value=""}catch(o){console.log(o.message)}else h.value="Choose your profile image",setTimeout(()=>{h.value=""},2e3);setTimeout(()=>{M.push("/")},1e3)};return(o,l)=>(a(),s(V,null,[o.token?c("",!0):(a(),R(A,{key:0})),e("div",null,[e("div",G,[(a(!0),s(V,null,$(n.value,t=>(a(),s("div",H,[e("form",{onSubmit:I(j,["prevent"]),class:"w-full shadow-md rounded-md py-4 px-6 k:border border-gray-900"},[Q,e("div",W,[e("label",X,[_(m(q),{class:"w-6 h-6"})]),u.value?(a(),s("img",{key:0,src:u.value,alt:"blob",class:"h-32 w-32 border-2 rounded-full"},null,8,Z)):c("",!0),t.avatar?(a(),s("img",{key:1,src:t.avatar,alt:"avatar",class:"h-32 w-32 border-2 rounded-full"},null,8,ee)):c("",!0),!t.avatar&&!u.value?(a(),s("img",{key:2,src:m(Y),alt:"avatar",class:"h-32 w-32 border-2 rounded-full"},null,8,te)):c("",!0),e("input",{type:"file",onChange:U,hidden:"",name:"fileUpload",id:"fileUpload",accept:"image/*"},null,32)]),e("div",ae,[e("div",se,[oe,_(m(C),{class:"w-4 h-4 text-black"})]),v(e("input",{type:"text",placeholder:"Username",class:"form-input text-black","onUpdate:modelValue":i=>t.username=i},null,8,le),[[b,t.username]])]),e("div",ne,[e("div",ie,[re,_(m(C),{class:"w-4 h-4 text-black"})]),t!=null&&t.bio?(a(),s("div",ce,[v(e("input",{type:"bio",placeholder:"Make it interesting",class:"form-input","onUpdate:modelValue":i=>t.bio=i},null,8,ue),[[b,t.bio]])])):(a(),s("div",de,[v(e("input",{type:"bio",placeholder:"Make it interesting",class:"form-input text-black","onUpdate:modelValue":l[0]||(l[0]=i=>f.bio=i)},null,512),[[b,f.bio]])]))]),e("div",me,[t.avatar?c("",!0):(a(),s("p",he,B(h.value),1))]),e("div",null,[e("button",pe,B(p.value?"Loading....":"Start Chat"),1)])],40,K)]))),256))])])],64))}};export{ve as default};
